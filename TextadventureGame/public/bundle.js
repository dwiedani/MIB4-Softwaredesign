!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="public",i(i.s=5)}([function(t){t.exports=JSON.parse('{"a":[{"id":0,"name":"Kurts Home","information":"Kurts Home","nextStages":[1,2],"items":[],"locked":false,"npcs":[0]},{"id":1,"name":"Billys Home","information":"Billys Home","nextStages":[0,2],"items":[0],"locked":true,"npcs":[1]},{"id":2,"name":"Billys Backyard","information":"Billys Home Backyard","nextStages":[1,0],"items":[1],"locked":false,"npcs":[1]}]}')},function(t){t.exports=JSON.parse('{"a":{"id":0,"name":"","maxHp":100,"hp":100,"attack":10,"armor":50,"equipped":[],"isAggressive":false,"items":[],"bagSize":5,"interactions":[]}}')},function(t){t.exports=JSON.parse('{"a":{"introduction":"Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.","currentStageId":0}}')},function(t){t.exports=JSON.parse('{"a":[{"id":0,"name":"Kurt","maxHp":100,"hp":50,"attack":10,"armor":50,"equipped":[],"isAggressive":false,"items":[],"interactions":[]},{"id":1,"name":"Billy","maxHp":100,"hp":50,"attack":10,"armor":50,"equipped":[],"isAggressive":false,"items":[],"interactions":[]}]}')},function(t){t.exports=JSON.parse('{"a":[{"id":0,"name":"Slingshot","type":"equippable","increaseHP":0,"bagSize":0,"hp":50,"attack":10,"armor":50,"opensStage":-1},{"id":1,"name":"Key to Bills home","type":"consumable","increaseHP":0,"bagSize":0,"hp":0,"attack":0,"armor":0,"opensStage":1},{"id":2,"name":"Bills Schoolbag","type":"equippable","increaseHP":0,"bagSize":5,"hp":0,"attack":0,"armor":0,"opensStage":-1}]}')},function(t,e,i){"use strict";i.r(e);var s=i(0),n=i(1),a=i(2);class r{constructor(t){this.id=t.id,this.name=t.name,this.maxHp=t.maxHp,this.hp=t.hp,this.attack=t.attack,this.armor=t.armor,this.items=t.items,this.bagSize=t.bagSize,this.equipped=t.equipped}move(t,e){e.addCharacter(t.removeCharacter(this))}giveItem(t){return this.items.splice(t,1)[0]}takeItem(t){this.items.push(t)}useItem(t,e){switch(this.items[t].type){case"consumable":if(-1!==this.items[t].opensStage)for(let i of e.currentStage.nextStages)return i.id===this.items[t].opensStage?(e.stages[this.items[t].opensStage].locked=!1,"You opened "+i.name):"You cant do this here.";break;case"equippable":let i=this.items[t];return this.equipped.push(this.items.splice(t,1)[0]),this.maxHp+=i.hp,this.attack+=i.attack,this.armor+=i.armor,this.bagSize+=i.bagSize,"You equipped "+i.name+"."}return"You cant use "+this.items[t].name}getItemOptions(){let t=[];for(let e=0;e<this.items.length;e++)t.push("("+e+") - "+this.items[e].toString());return t}getActionOptions(){let t=[];return this.items.length>0&&t.push("(u) - use Item from Bag \n"),t}}class o extends r{constructor(t,e){super(t),this.name=e,this.name=e}}class h extends r{constructor(t){super(t),this.isAggressive=t.isAggressive,this.interactions=t.interactions}}var c=i(3),u=i(4);class m{constructor(t){this.id=t.id,this.name=t.name,this.type=t.type,this.increaseHp=t.increaseHP,this.bagSize=t.bagSize,this.hp=t.hp,this.attack=t.attack,this.armor=t.armor,this.opensStage=t.opensStage}toString(){let t=this.name;return t+="{"+this.type+"}<br>",0!==this.increaseHp&&(t+="+ restores "+this.increaseHp+"hp<br>"),0!==this.bagSize&&(t+="+ "+this.bagSize+"Bagsize<br>"),0!==this.hp&&(t+="+ "+this.hp+"hp<br>"),0!==this.attack&&(t+="+ "+this.attack+"atk<br>"),0!==this.armor&&(t+="+ "+this.armor+"def<br>"),t}}let p=c.a,l=u.a;class d{constructor(t){if(this.items=[],this.characters=[],this.id=t.id,this.name=t.name,this.information=t.information,this.nextStageIds=t.nextStages,this.locked=t.locked,t.items.length>0)for(let e of t.items)this.items.push(new m(l[e]));for(let e of t.npcs)this.characters.push(new h(p[e]))}getStageInformation(){let t="This is "+this.information+". ";if(this.characters.length>1){t+="There are some people: ";for(let e of this.characters)t+="-"+e.name;t+=". "}else if(1==this.characters.length){t+="There is ";for(let e of this.characters)t+=e.name+". "}else t+="There are no people. ";if(this.items.length>0){t+="There are some Items: ";for(let e of this.items)t+=e.name+" "}else t+="There are no Items. ";return t+="\n",t}getStageActionOptions(){let t=[];return this.items.length>0&&t.push("(t) - take \n"),this.characters.length>0&&t.push("(i) - interact \n"),this.nextStages.length>0&&t.push("(m) - move \n"),t}getNextStageOptions(){let t=[];for(let e=0;e<this.nextStageIds.length;e++)t.push("("+e+") - "+this.nextStages[e].name);return t}getItemOptions(){let t=[];for(let e=0;e<this.items.length;e++)t.push("("+e+") - "+this.items[e].name);return t}removeCharacter(t){let e=this.characters.indexOf(t);return this.characters.splice(e,1)[0]}addCharacter(t){this.characters.push(t)}initiateNextStages(t){this.nextStages=[];for(let e=0;e<this.nextStageIds.length;e++)this.nextStages.push(t.stages[this.nextStageIds[e]])}giveItem(t){return this.items.splice(t,1)[0]}}let g=s.a,f=n.a,S=a.a;class b{constructor(t){this.stages=[],this.introduction=S.introduction,this.player=new o(f,t);for(let t of g)this.stages.push(new d(t));this.currentStage=this.stages[S.currentStageId]}initiateAllStages(){for(let t of this.stages)t.initiateNextStages(this)}changeCurrentStage(t){this.currentStage=t}movePlayer(t){let e=this.currentStage.nextStages[t];return!e.locked&&(this.changeCurrentStage(e),!0)}}class y{constructor(t,e){switch(t){case"info":this.command=t,this.information=e.currentStage.getStageInformation(),this.options=e.currentStage.getStageActionOptions(),this.options=this.options.concat(e.player.getActionOptions());break;case"u":this.command=t,this.information="(Bag: "+e.player.items.length+"/"+e.player.bagSize+" ) Wich Item do you want to use?",this.options=e.player.getItemOptions();break;case"m":this.command=t,this.information="Where do you want to go?",this.options=e.currentStage.getNextStageOptions();break;case"t":this.command=t,this.information="What do you want to take?",this.options=e.currentStage.getItemOptions();break;default:this.command="info",this.information=e.currentStage.getStageInformation(),this.options=e.currentStage.getStageActionOptions()}}toString(){let t=this.command+": ";t+=this.information+" <br> ";for(let e of this.options)t+=e+" <br> ";return t}do(t,e){switch(this.command){case"m":return e.movePlayer(t)?"moved to "+this.options[t]:"the door is locked.";case"t":return e.player.items.length<e.player.bagSize?(e.player.takeItem(e.currentStage.giveItem(t)),"took "+this.options[t]+" from "+e.currentStage.name):"Bag is full.";case"u":return e.player.useItem(t,e);default:return"You cant do this here."}}}class k{readLine(t){return prompt(t,"")}printLine(t){alert(t)}}class x{constructor(t){this.clickHandler=this.clickHandlerUnbinded.bind(this),this.buttonHandler=this.buttonHandlerUnbinded.bind(this),this.gameManager=t,this.input=document.createElement("input"),this.output=document.createElement("div"),this.return=document.createElement("button"),this.return.innerHTML="Enter",this.return.addEventListener("click",this.clickHandler),this.input.addEventListener("keyup",this.buttonHandler),document.body.appendChild(this.output),document.body.appendChild(this.input),document.body.appendChild(this.return)}clickHandlerUnbinded(t){this.gameManager.doAction()}buttonHandlerUnbinded(t,e){13===t.keyCode&&(this.gameManager.doAction(),this.input.value="")}readLine(){return this.input.value}printLine(t){t="<p>"+t+"</p>",this.output.innerHTML+=t}}let v=new class{constructor(){this.inout=new k,this.ui=new x(this),this.win=!1,this.instructionList=[]}initializeGame(){this.game=new b(this.inout.readLine("Type in player name")),this.game.initiateAllStages()}runGame(){this.ui.printLine(this.game.player.name+", "+this.game.introduction),this.doAction()}step(){this.ui.printLine(this.instructionList[this.instructionList.length-1].toString())}doAction(){if(this.instructionList.length>0){let t=this.instructionList[this.instructionList.length-1];switch(t.command){case"info":this.instructionList.pop();let e=this.ui.readLine(),i=new y(e,this.game);this.instructionList.push(i);break;default:let s=this.ui.readLine(),n=t.do(Number(s),this.game);"false"!==n?(this.ui.printLine(n),this.instructionList.pop(),this.createInfoInstruction()):this.ui.printLine("this is no Option.")}}else this.createInfoInstruction();this.step()}createInfoInstruction(){let t=new y("info",this.game);this.instructionList.push(t)}};v.initializeGame(),v.runGame()}]);